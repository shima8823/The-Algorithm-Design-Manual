次のソートアルゴリズムの正しさを証明せよ． 

Bubblesort (A)
        for i from n to 1
                for j from 1 to i − 1
                        if (A[j] > A[j + 1])
                                A[j] と A[j + 1] の値を交換する 

A = {3, 2, 1}
n = 3

1. 内側ループの事後条件:
「j のループが終わった瞬間、A[i] は A[1...i] の中の [最も大きい値] である。」
2. 外側ループの不変条件:
「i のループが始まる直前、A[i+1...n] は [ソート済み] であり、かつ A[1...i] のすべての要素よりも [値が大きい状態] である。」

内側ループの不変条件: 内側ループの j-1回目のイテレーション開始時、A[j] は A[1...j] の中の最大値である。

外側ループの不変条件: i回目のイテレーション開始時、部分配列A[i+1 ... n]は昇順にソート済みである。
A[1...i]の全ての要素 <= [i+1...n]の全ての要素である。

- 初期化
ループ開始前はi == nの時点でAは空集合A[i+1...n] = A[]で表せることができる。空集合は値が存在しないためソート済みかつA[i] <= A[i+1...n]という条件を満たす。

- イテレーション
不変条件により、外側ループが始まる直前、A[i+1...n]は昇順にソート済みであり、内側ループが終了した後、A[i]がA[1...i]の最大値になります。
さらに不変条件:{A[1...i] の全要素} <= {A[i+1...n] の全要素} であるため最大値A[i]は{A[i+1...n]の全ての要素}以下であり、ソートの条件を満たす。

- 終了
i == 1の時A[i+1...n]つまりA[2...n]はソート済みの状態です。
不変条件によりA[1] <= A[2...n]になります。よってA[1] + A[2...n]はソート済みとなり、全体A[1...n]も同様になります。
